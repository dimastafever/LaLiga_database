# Работа с файлом LaLiga_API.ipynb

## Введение

Файл `LaLiga_API.ipynb` представляет собой Jupyter Notebook, предназначенный для работы с данными о командах, игроках и стадионах испанской Ла Лиги. Код использует API Football-Data.org для получения актуальной информации и преобразования её в форматы, подходящие для вставки в базу данных PostgreSQL.

## Необходимые зависимости

Для работы с ipynb требуется установить следующие Python-библиотеки:

- `requests` - для выполнения HTTP-запросов к API
- `pandas` - для обработки и анализа данных
- `jupyter` - для запуска ipynb

## Получение API-ключа

Для работы с API Football-Data.org необходимо получить бесплатный API-ключ:

1. Перейдите на сайт [Football-Data.org](https://www.football-data.org/)
2. Зарегистрируйтесь и получите API-ключ
3. Замените значение переменной `API_KEY = "use_your_own_api_key"` на ваш ключ

**Важно:** Соблюдайте лимиты API, запросы можно делать ограниченное количество раз в определённых промежуток времени.

## Структура кода

LaLiga_API состоит из трёх основных разделов:

### 1. Получение команд и игроков в CSV

Этот раздел выполняет следующие действия:

- Отправляет запрос к API для получения списка всех команд Ла Лиги
- Для каждой команды получает детальную информацию, включая состав игроков
- Сохраняет данные в формате CSV (`la_liga_players.csv`)

**Важно:** Для добавления данных в базу нужно добавить недостающие данные в таблицу `teams`  
### 2. Парсинг данных в SQL-скрипты

Второй раздел обрабатывает CSV-файл и генерирует SQL-команды для вставки данных:

- Читает данные из `la_liga_players.csv`
- Создаёт отдельные INSERT-запросы для таблиц `teams` и `players`
- Сохраняет результат в файл `insert_data.sql`

**Структура таблиц, получаемых из файла .csv:**
- `teams`: team_id, team_name, team_short_name
- `players`: player_id, api_id, name, position, nationality, team_id

### 3. Получение данных о стадионах

Третий раздел получает информацию о стадионах команд:

- Запрашивает данные о стадионах через API
- Генерирует SQL-команды для вставки в таблицу `stadiums`
- Сохраняет результат в файл `insert_stadiums.sql`

**Структура таблицы:**
- `stadiums`: stadium_id, name, city, team_id
**Примечание:** Для таблицы `stadiums` также нужно добавить недостающие данные

## Заключение

Этот код предоставляет полный цикл обработки данных: от получения из внешнего API до подготовки SQL-скриптов для вставки в базу данных. Он может служить основой для автоматизации обновления данных о Ла Лиге.
